{% extends "base.html" %}

{% block title %}Start Practice - C Programming Practice{% endblock %}

{% block content %}
<div class="practice-start">
    <h1>Choose Practice Mode</h1>

    {% if has_active_session %}
    <div class="mode-card resume-card">
        <h2>Resume Session</h2>
        <p>You have an active session with {{ remaining_questions }} question{{ '' if remaining_questions == 1 else 's' }} left.</p>
        <a href="{{ url_for('practice.question') }}" class="btn-primary btn-large">Resume Practice</a>
    </div>
    {% endif %}

    <div class="practice-modes">
        <form method="POST" action="{{ url_for('practice.start_practice') }}">
            <div class="mode-card featured">
                <h2>Smart Practice</h2>
                <p>Adaptive learning algorithm focuses on your weak areas</p>
                <ul>
                    <li>70% questions from your weakest categories</li>
                    <li>30% review questions</li>
                    <li>Choose your session length</li>
                </ul>
                <label class="form-label">Questions per session</label>
                <select name="question_count" class="form-control">
                    <option value="5">5 questions</option>
                    <option value="10" selected>10 questions</option>
                    <option value="15">15 questions</option>
                </select>
                <input type="hidden" name="mode" value="smart">
                <button type="submit" class="btn-primary btn-large">Start Smart Practice</button>
            </div>
        </form>

        <form method="POST" action="{{ url_for('practice.start_practice') }}" class="practice-form">
            <div class="mode-card">
                <h2>Category Practice</h2>
                <p>Focus on a specific category</p>
                <select name="category" class="form-control" required>
                    <option value="">Select Category</option>
                    <optgroup label="Core C Concepts">
                        <option value="memory_management">Memory Management</option>
                        <option value="pointers">Pointer Safety</option>
                        <option value="strings">Strings & Null Terminators</option>
                        <option value="structs">Struct Memory Layout</option>
                        <option value="integer_division">Integer vs Float Division</option>
                        <option value="control_flow">Control Flow</option>
                        <option value="recursion">Recursion</option>
                        <option value="file_io">File I/O</option>
                    </optgroup>
                    <optgroup label="Interactive Exercises">
                        <option value="fill_blanks">Fill in the Blanks</option>
                        <option value="drag_drop">Drag & Drop Code</option>
                        <option value="recursive_trace">Recursive Trace</option>
                        <option value="programming_tasks">Programming Tasks (Exam Style)</option>
                    </optgroup>
                </select>
                <small class="field-message" data-message-for="category"></small>
                <label class="form-label">Questions per session</label>
                <select name="question_count" class="form-control">
                    <option value="5">5 questions</option>
                    <option value="10" selected>10 questions</option>
                    <option value="15">15 questions</option>
                </select>
                <input type="hidden" name="mode" value="category">
                <button type="submit" class="btn-secondary btn-large">Start Category Practice</button>
            </div>
        </form>

        <form method="POST" action="{{ url_for('practice.start_practice') }}">
            <div class="mode-card">
                <h2>Random Mix</h2>
                <p>Random questions from all categories</p>
                <ul>
                    <li>Choose your session length</li>
                    <li>All categories mixed</li>
                    <li>Great for general review</li>
                </ul>
                <label class="form-label">Questions per session</label>
                <select name="question_count" class="form-control">
                    <option value="5">5 questions</option>
                    <option value="10" selected>10 questions</option>
                    <option value="15">15 questions</option>
                </select>
                <input type="hidden" name="mode" value="random">
                <button type="submit" class="btn-secondary btn-large">Start Random Practice</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/practice_start.js') }}"></script>
{% endblock %}
